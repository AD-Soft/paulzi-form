/**
 * @see https://github.com/paulzi/paulzi-form
 * @license MIT (https://github.com/paulzi/paulzi-form/blob/master/LICENSE)
 * @version 2.4.0
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){var t=function(t){var a=t.find("output, .form-output").first(),r=t.data("formOutput");return r&&(a=e(r)),a},a=function(t){return-1!==e.inArray(t.prop("tagName"),["INPUT","BUTTON"])&&-1!==e.inArray(t.attr("type").toLowerCase(),["submit","image"])};e.fn.formAlert=function(a,r){var n=e(this),o=e(a);return o.hasClass("alert")||(r=r||"info",o=e('<div role="alert" class="alert alert-'+r+'">').append(o)),e.fn.alert&&!o.hasClass("alert-dismissible")&&(o.addClass("alert-dismissible"),e('<button type="button" class="close" aria-label="close" data-dismiss="alert">').html('<span aria-hidden="true">&times;</span>').prependTo(o)),o.addClass("fade in").appendTo(t(n)),o};var r=function(t){if(t.isDefaultPrevented())return!1;var r=e(this);if(r.hasClass("form-loading"))return t.preventDefault(),!1;r.addClass("form-loading");var n=e(document.activeElement).filter(".btn-loading");a(n)||(n=r.find(".btn-loading.btn-submit-default")),n.addClass("disabled");var o=n.attr("data-loading-text");o&&(n.data("paulziFormLoadingText",n.text()),n.text(o));var i=n.data("loadingIcon");i&&(e("<span>&nbsp;</span>").addClass("btn-loading-space").prependTo(n),e("<i>").addClass("btn-loading-icon").addClass(i).prependTo(n))},n=function(){var t=e(this).find(".btn-loading.disabled");t.removeClass("disabled"),t.children(".btn-loading-icon, .btn-loading-space").remove(),t.each(function(){var t=e(this),a=t.data("paulziFormLoadingText");a&&t.text(a)})};e(document).on("submit.paulzi-form","form",r),e(document).on("formajaxalways.paulzi-form",".form-ajax",n);var o,i=["action","enctype","method","target"],l=function(){if("undefined"!=typeof o)return o;var e=document.createElement("input"),t=document.createElement("form"),a="paulzi-form-support";return t.id=a,document.body.appendChild(t),document.body.appendChild(e),e.setAttribute("form",a),o=e.form===t,document.body.removeChild(t),document.body.removeChild(e),o},s=function(){var e=document.createElement("input");return!!("formAction"in e)},u=function(){var t=this,r=e(this);if(!l()){var n=r.attr("id");if(n){e('[form="'+n+'"]').not("form#"+n+' [form="'+n+'"]').filter(function(){return this.name&&!e(this).is(":disabled")&&(this.checked||"checkbox"!==this.type&&"radio"!==this.type)}).each(function(){e('<input type="hidden">').attr("name",this.name).val(e(this).val()).addClass("paulzi-form-polyfill").appendTo(t)})}}if(!s()){var o=e(document.activeElement);a(o)&&e.each(i,function(e,t){var a=o.attr("form"+t);a&&r.data("paulziFormPolyfill"+t,a).attr(t,a)})}},f=function(){var t=e(this);l()||t.find(".paulzi-form-polyfill").remove(),s()||e.each(i,function(e,a){var r="paulziFormPolyfill"+a,n=t.data(r);n&&t.attr(a,n).removeData(r)})};e(document).on("submit.paulzi-form","form",u),e(document).on("formajaxalways.paulzi-form","form",f);var d="paulzi-form-no-empty-item",m=function(){return e(this).find(":enabled").filter(function(){return""==this.value}).addClass(d).each(function(){this.disabled=!0}),!0},p=function(){e(this).find("."+d).removeClass(d).each(function(){this.disabled=!1})};e(document).on("submit.paulzi-form",".form-no-empty",m),e(document).on("formajaxalways.paulzi-form",".form-no-empty",p);var c=function(t){var a=e(this).offset();e(this).prop("paulziFormX",t.pageX-a.left).prop("paulziFormY",t.pageY-a.top)},v=function(r){if(r.isDefaultPrevented())return!1;if(e(document.activeElement).hasClass("btn-no-ajax"))return!0;r.preventDefault();var n=e(this),o=function(e){var t=e.getResponseHeader("X-Redirect");return t?(document.location.href=t,!0):!1},i=function(a,r,i){var l=jQuery.Event("formajaxdone");if(n.trigger(l,arguments),!l.isDefaultPrevented()&&!o(i)&&/^text\/html(;|$)/.test(i.getResponseHeader("Content-Type"))){var s=e(e.parseHTML(a,!0));if(n.trigger("contentprepare",[s]),s.hasClass("form-replace"))n.replaceWith(s);else{var u=t(n),f=s.data("formOutput");f&&(u=e(f)),s.hasClass("alert")&&(s=n.formAlert(s)),u.html(s)}n.trigger("contentinit",[s])}},l=function(t,a,r){var i=jQuery.Event("formajaxfail");if(n.trigger(i,arguments),!i.isDefaultPrevented()&&!o(t)){var l=!1;t.responseText&&(l=e(e.parseHTML(t.responseText,!0))),l&&l.hasClass("alert")?n.formAlert(l):(l=["["+a+"]",r,t.responseText].join("<br>"),l=e(e.parseHTML(l,!0)),n.formAlert(l,"danger"))}},s=function(){var e=jQuery.Event("formajaxalways");n.trigger(e,arguments),e.isDefaultPrevented()||n.removeClass("form-loading")},u=function(e,t){var a=jQuery.Event("formajaxbefore");return n.trigger(a,[e,t]),!a.isDefaultPrevented()};if("multipart/form-data"==n.attr("enctype")&&"function"==typeof e.fn.ajaxSubmit)n.ajaxSubmit({beforeSubmit:function(e,t,a){a.beforeSend=u},success:i,error:l,complete:s,data:{"X-Requested-With":"XMLHttpRequest"},uploadProgress:function(e){var t=0,a=e.loaded||e.position,r=e.total;e.lengthComputable&&(t=a/r*100),n.trigger("formajaxprogress",[a,r,t])}});else{var f=n.attr("action"),d=n.attr("method")||"GET",m=n.serializeArray(),p=e(document.activeElement);p.attr("name")&&!p.is(":disabled")&&a(p)&&(p.attr("formaction")&&(f=p.attr("formaction")),p.attr("formmethod")&&(d=p.attr("formmethod")),m.push({name:p.attr("name"),value:p.val()}),p.prop("paulziformX")&&(m.push({name:p.attr("name")+".x",value:p.prop("paulziformX")}),p.removeProp("paulziformX")),p.prop("paulziformY")&&(m.push({name:p.attr("name")+".y",value:p.prop("paulziformY")}),p.removeProp("paulziformY"))),e.ajax({method:d,url:f,data:m,beforeSend:u}).done(i).fail(l).always(s)}return!1};e(document).on("click.paulzi-form",'input[type="image"]',c),e(document).on("submit.paulzi-form",".form-ajax",v)});