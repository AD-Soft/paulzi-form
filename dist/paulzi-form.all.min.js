/**
 * PaulZi Form
 * @see https://github.com/paulzi/paulzi-form
 * @license MIT (https://github.com/paulzi/paulzi-form/blob/master/LICENSE)
 * @version 3.0.0
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){"use strict";a(document).on("submit","form",function(b){if(!b.isDefaultPrevented()){var c=a(this),d=a(window);d.off("submit"),d.one("submit",function(){var e=a.Event("submitlast");if(c.trigger(e),e.isDefaultPrevented())b.preventDefault();else{c.trigger({type:"submitbefore",transport:"default"});var f="formExtraEvents",g=function(){var a=c.data(f);a&&clearTimeout(a),a!==!1&&(c.data(f,!1),c.trigger({type:"submitstart",transport:"default"}))};c.data(f,setTimeout(g,100)),d.one("beforeunload",g),d.one("unload",function(){g(),c.trigger({type:"submitend",transport:"default"})})}})}})}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){"use strict";var b="formAssociationPolyfill",c='input[type="submit"],input[type="image"],button[type="submit"]';a(document).on("click","input,button",function(){document.activeElement&&document.activeElement!==document.body||a(this).focus()});var d=function(){this.style.display="none"},e=function(){var c=a(document.body),e=a("<form>").prop("id",b).each(d).appendTo(c),f=a('<input form="'+b+'">').each(d).appendTo(c),g=f.prop("form")===e[0];return e.add(f).remove(),g},f=function(b){var c=a(this).attr("form");if(c){var d=a(this).closest("form");d.length&&d[0].id===c||(b.preventDefault(),d.one("submit",function(a){a.preventDefault(),a.stopPropagation()}),a("form#"+c).trigger("submit"))}},g=function(){var c,e,f,g=this,h=[];for(c=0;c<g.elements.length;c++)e=g.elements[c],f=a(e).attr("form"),f&&f!==g.id&&!e.disabled&&(e.disabled=!0,h.push(e));var i=a();if(g.id){var j=function(b,c){var e=a("<div>").each(d);return e[c](b),i=i.add(e),e},k=j(g,"prependTo");a('[form="'+g.id+'"], form[id="'+g.id+'"]').each(function(){if(this===g)k=j(g,"appendTo");else if(-1===a.inArray(g.elements,this)&&!this.disabled){var c=this.cloneNode(!0);a(this).replaceWith(c).prop(b,c).appendTo(k)}})}g[b]=[h,i]},h=function(){var c=this[b];if(c){var d;for(d=0;d<c[0].length;d++)c[0][d].disabled=!1;c[1].children().each(function(){a(this[b]).replaceWith(this),this[b]=null}).end().remove()}};e()||(a(document).on("click",c,f),a(document).on("submitbefore","form",g),a(document).on("submitstart","form",h));var i=b+"Submission",j=["action","enctype","method","target"],k=function(){var b=a("<input>")[0];return!!("formAction"in b)},l=function(){var b=a(this),d=a(document.activeElement).filter(c);if(d.length||a.each(this.elements,function(b,e){e=a(e).filter(c),!d.length&&e.length&&(d=e)}),d.length){var e={},f={};a.each(j,function(a,c){e[c]=d.attr("form"+c),f[c]=b.attr(c)}),b.prop(i,f),b.attr(e)}},m=function(){var b=a(this).prop(i);b&&a(this).attr(b)};k()||(a(document).on("submitbefore","form",l),a(document).on("submitstart","form",m))}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){"use strict";var b="jqueryIframeAjax",c="position: absolute; z-index: -1000; width: 0; height: 0; overflow: hidden; border: none;",d=function(b){for(var c,d=[],e=b.split("&"),f=function(a){return decodeURIComponent(a).replace("+"," ")},g=0;g<e.length;g++)c=e[g].split("="),""!==c[0]&&d.push(a.map(c,f));return d};a.ajaxTransport("+*",function(e){if(e.iframe){var f;return{send:function(g,h){var i,j=b+"-"+a.now();f=a('<iframe name="'+j+'" style="'+c+'">');var k;e.form?k=a(e.form):(k=a("<form>").attr("style",c).appendTo(document.body),e.files&&k.attr("enctype","multipart/form-data"));var l=k[0],m={action:l.action,method:l.method,target:l.target};k.prop({action:e.url,method:e.method,target:j});var n=[],o=e.data||"";for(o&&"string"!=typeof o&&(o=a.param(o,e.traditional)),o=a.merge([["X-Requested-With","IFrame"]],d(o)),i=0;i<o.length;i++)n.push(a('<input type="hidden">').attr("name",o[i][0]).val(o[i][1]).appendTo(k));var p=[];if(e.files){var q,r;for(i=0;i<e.files.length;i++)q=a(e.files[i]),r=q.clone().data(b,q),p.push(r),q.replaceWith(r),q.appendTo(k)}f.one("load",function(){f.one("load",function(){try{var b=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,c=b.body?b.body:b.documentElement,d=a(c).find("textarea[data-status]"),e=parseInt(d.data("status")||200,10),g=d.data("statusText")||"OK",i=d.data("contentType"),j=d.data("headers")||null;if(j&&"object"==typeof j){var k=[];a.each(j,function(a,b){k.push(a+": "+b)}),j=k.join("\r\n")}i&&(i="Content-Type: "+i,j=j?i+"\r\n"+j:i);var l;l=d.size()?{text:d.val()}:{html:c.innerHTML,text:c.textContent||c.innerText},f.remove(),h(e,g,l,j)}catch(m){f.remove(),h(0,"IFrame error")}});var c=function(){var a;for(l.submit(),k.prop(m),a=0;a<p.length;a++)p[a].replaceWith(p[a].data(b));if(e.form)for(a=0;a<n.length;a++)n[a].remove();else k.remove();e.iframeOnSubmit&&e.iframeOnSubmit()};e.form?setTimeout(c,1):c()}),a(document.body).append(f)},abort:function(){f.off("load"),f.remove()}}}})}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.PaulZiForm=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.PaulZiForm=b(a.jQuery)}(this,function(a){"use strict";var b=function(b){var c=a();return b.icon&&(c=c.add(a("<i>").addClass(b.icon))),b.text&&(c=c.add(a("<span>").text(b.text))),c},c=a.extend(!0,{classes:{formLoading:"form-loading",btnLoading:"btn-loading"},attributes:{via:"data-via",lock:"data-lock",submitEmpty:"data-submit-empty",to:"data-insert-to",context:"data-insert-context",mode:"data-insert-mode",loadingText:"data-loading-text",loadingIcon:"data-loading-icon"},defaults:{lock:!0,submitEmpty:!0,to:"output",context:"this",mode:"html",skipOnError:!1},defaultTemplate:b,buttonLoadingTemplate:b,buttonLoadingForce:!1},window.PaulZiForm||{}),d="paulziForm",e="."+d,f=c.classes,g=c.attributes,h=c.defaults,i=function(b){var c='input[type="submit"],input[type="image"],button[type="submit"]',d=a(document.activeElement).filter(c);return a.each(b.elements,function(b,e){e=a(e).filter(c),!d.length&&e.length&&(d=e)}),d},j=d+"NoEmpty",k=function(b){var c=a(b.target),d=[];a.each(c.prop("elements"),function(b,e){if(""===e.value&&!e.disabled&&"submit"!==e.type){var f=a(e).closest("["+g.submitEmpty+"]").attr(g.submitEmpty)||c.attr(g.submitEmpty);f=f?-1!==a.inArray(f,["1","true"]):h.submitEmpty,f||(e.disabled=!0,d.push(e))}}),c.data(j,d)},l=function(b){var c=a(b.target).data(j);c&&a.each(c,function(a,b){b.disabled=!1})};a(document).on("submitbefore"+e,k),a(document).on("submitstart"+e,l);var m=d+"Lock",n=function(b){var c=a(b.target);if(c.data(m)){var d=c.attr(g.lock);("undefined"!=typeof d?-1!==a.inArray(d,["1","true"]):h.lock)&&b.preventDefault()}},o=function(b){a(b.target).data(m,!0)},p=function(b){a(b.target).data(m,!1)};a(document).on("submitlast"+e,n),a(document).on("submitbefore"+e,o),a(document).on("submitend"+e,p);var q=d+"Scenario",r=function(b){var c=a(b.target),d=[];a.each(c.prop("elements"),function(c,e){var f=a(e).closest("["+g.via+"]").attr(g.via);f&&"all"!==f&&f!==b.transport&&!e.disabled&&"submit"!==e.type&&(e.disabled=!0,d.push(e))}),c.data(q,d)},s=function(b){var c=a(b.target).data(q);c&&a.each(c,function(a,b){b.disabled=!1})};a(document).on("submitbefore"+e,r),a(document).on("submitstart"+e,s);var t=function(b){var c=a(this),e=c.offset();c.data(d+"X",Math.round(b.pageX-e.left)).data(d+"Y",Math.round(b.pageY-e.top))},u=function(b){var c=a(b.target),e=i(b.target),f=c.attr(g.via),h=e.attr(g.via);if(!b.isDefaultPrevented()&&("ajax"===f&&!h||"ajax"===h)){b.preventDefault();var j=a.Event("submitajax");if(c.trigger(j),!j.isDefaultPrevented()){c.trigger({type:"submitbefore",transport:"ajax"});var k={url:e.attr("formaction")||c.attr("action"),method:e.attr("formmethod")||c.attr("method")||"GET",contentType:e.attr("formenctype")||c.attr("enctype"),xhr:function(){var b=a.ajaxSettings.xhr(),d=function(b){return function(d){var e=a.Event(d,{type:b,loaded:d.loaded,total:d.total,lengthComputable:d.lengthComputable});c.trigger(e)}};return b.addEventListener&&b.addEventListener("progress",d("downloadprogress")),b.upload&&b.upload.addEventListener&&(b.upload.addEventListener("progress",d("uploadprogress")),b.upload.addEventListener("loadend",d("uploadend"))),b}},l=[],m=e.attr("name");if(m){var n;n=e.data(d+"X"),"undefined"!=typeof n?l.push({name:m+".x",value:n}):l.push({name:m,value:e.val()}),n=e.data(d+"Y"),"undefined"!=typeof n&&l.push({name:m+".y",value:n})}var o=function(){c.trigger({type:"submitstart",transport:"ajax"})};if("multipart/form-data"===k.contentType)if("FormData"in window){var p=new FormData(c[0]);a.each(l,function(a,b){p.append(b.name,b.value)}),k.data=p,k.processData=!1,k.contentType=!1}else k.data=l,k.form=c[0],k.iframe=!0,k.iframeOnSubmit=o;else k.data=a.merge(c.serializeArray(),l);a.ajax(k).done(function(a,b,d){c.trigger({type:"submitdone",transport:"ajax"},[a,d])}).fail(function(a,b,d){c.trigger({type:"submitfail",transport:"ajax"},[a.responseText,a,d])}).always(function(){var a,b,d;"object"==typeof arguments[2]?(a=arguments[0],b=arguments[2]):(a=arguments[0].responseText,b=arguments[0],d=arguments[2]),c.trigger({type:"submitend",transport:"ajax"},[a,b,d])}),k.iframe||o()}}};a(document).on("click"+e,'input[type="image"]',t),a(document).on("submitlast"+e,u);var v=function(b,c,d,e){if("ajax"===b.transport){var f=d.getResponseHeader("X-Redirect");f&&(document.location.href=f,b.preventDefault());var i=d.getResponseHeader("Content-Type");if(!b.isDefaultPrevented()&&(null===i||/^text\/html(;|$)/.test(i))){var j=a(b.target),k=a(a.parseHTML(c,!0));e&&h.skipOnError||k.each(function(){var b=a(this),c=b.attr(g.to)||j.attr(g.to)||h.to,d=b.attr(g.context)||j.attr(g.context)||h.context,e=b.attr(g.mode)||j.attr(g.mode)||h.mode;d&&c&&(d="document"===d?a(document):"this"===d?j:j.closest(d),c="context"===c?d:d.find(c)),c&&c.length&&c[e]&&(j.trigger("contentprepare",[k,e,c]),c[e](this),j.trigger("contentinit",[k,e,c]))})}}};g.via!==!1&&a(document).on("submitend"+e,v);var w=function(b){var e=a(b.target).addClass(f.formLoading),h=i(b.target).addClass(f.btnLoading),j={form:e[0],btn:h[0],text:h.attr(g.loadingText),icon:h.attr(g.loadingIcon)};if(e.data(d+"Btn",h),j.text||j.icon||c.buttonLoadingForce){var k=c.buttonLoadingTemplate(j);k&&(h.data(d+"Old",h.contents()),h.html(k))}},x=function(b){var c=a(b.target).removeClass(f.formLoading),e=c.data(d+"Btn");if(e){var g=e.data(d+"Old");e.html(g),e.removeClass(f.btnLoading)}};return a(document).on("submitbefore"+e,w),a(document).on("submitend"+e,x),c});